<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Winnie's Flamin' Health Insurance Empire</title>
  <!-- Use Google Fonts for premium typography -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css?v=2" />
  <script>
    if (window.location.protocol === 'file:') {
      window.location.href = 'http://localhost:5173';
    }
  </script>
</head>

<body>
  <!-- News Ticker -->
  <div id="news-ticker">
    <div id="news-ticker-content">
    </div>
  </div>

  <div id="loading-overlay">
    <h1>Loading Empire...</h1>
  </div>

  <div id="app">
    <!-- Left Panel: Stats & Meters -->
    <aside id="left-panel" class="panel glass-panel">
      <div class="stat-group">
        <h2>Revenue</h2>
        <div id="revenue-display" class="big-number">$0</div>
        <div id="rps-display" class="sub-text">per second: $0</div>
        <div id="bone-progress" style="font-size: 0.7rem; color: #ffcc00; margin-top: 5px;">
          ğŸ¦´ Next Bone in: <span id="next-bone-timer">15:00</span>
        </div>
      </div>

      <div class="meter-group">
        <h3>Spice Level <span id="spice-val">0</span>/100</h3>
        <div class="meter-bar-bg">
          <div id="spice-bar" class="meter-bar spice-fill" style="width: 0%"></div>
        </div>
        <p class="meter-desc">High spice risks a Meltdown!</p>
      </div>

      <div class="meter-group">
        <h3>Audit Risk <span id="risk-val">0</span>/100</h3>
        <div class="meter-bar-bg">
          <div id="risk-bar" class="meter-bar risk-fill" style="width: 0%"></div>
        </div>
        <p class="meter-desc">High risk triggers an Audit!</p>
      </div>

      <div class="meter-group">
        <h3>Level <span id="level-val">1</span></h3>
        <div class="meter-bar-bg">
          <div id="level-bar" class="meter-bar level-fill" style="width: 0%"></div>
        </div>
        <p class="meter-desc" id="level-desc">Expand your empire to level up!</p>
      </div>

      <div class="meter-group" id="mana-group" style="display: none;">
        <h3>Moppet's Patience <span id="mana-val">100</span>/100</h3>
        <div class="meter-bar-bg">
          <div id="mana-bar" class="meter-bar mana-fill" style="width: 100%"></div>
        </div>
      </div>

      <div class="stat-group" id="chaos-container" style="display: none;">
        <h3>Chaos Level</h3>
        <div id="chaos-display" class="chaos-text">Normal</div>
      </div>

      <div id="compliance-container" class="panel"
        style="margin-top: 10px; display: flex; justify-content: space-between; align-items: center;">
        <div>
          <strong>Compliance Credits:</strong>
          <span id="compliance-display">0</span>
        </div>
        <button id="compliance-btn" onclick="window.useComplianceCredit()"
          style="background: var(--revenue-green); color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-family: var(--font-main); font-weight: bold; font-size: 0.7rem;">FILE
          REPORT</button>
      </div>

      <div id="prestige-container" class="panel glass-panel prestige-panel" style="display: none;">
        <h3>Ascension Protocol</h3>
        <div class="prestige-stats">
          <div class="prestige-item">
            <span>Owned:</span>
            <span id="current-prestige" style="color: #00ff80;">0</span> ğŸ¾
          </div>
          <div class="prestige-item">
            <span>Bonus:</span>
            <span id="prestige-bonus" style="color: #00ff80;">0%</span> RPS
          </div>
          <div class="prestige-item">
            <span>Next:</span>
            <span id="prestige-gain" style="color: #bb86fc;">0</span> ğŸ¾
          </div>
        </div>
        <button id="prestige-btn" onclick="window.prestigeGame()" class="ascend-btn">ASCEND</button>
      </div>

      <!-- Fun Image Area (Card Flip) -->
      <div id="fun-image-container">
        <div class="flip-card">
          <div class="flip-card-inner" id="flip-card-inner">
            <div class="flip-card-front">
              <img
                src="https://media.discordapp.net/attachments/1424265734711935076/1471930982889160800/IMG_8075.jpg?ex=6990ba0d&is=698f688d&hm=181c8066a67a1113a4ed077f774daffd9024948541c234d7290563de07500b8b&animated=true"
                alt="Winnie Fun" id="winnie-fun-img">
            </div>
            <div class="flip-card-back">
              <h1>Deez Nuts</h1>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Center Panel: The Cheeto & Winnie -->
    <main id="center-panel" class="panel">
      <div id="particles-container"></div>

      <div id="winnie-container">
        <!-- Representing Winnie with CSS/Emoji until image available -->
        <div id="winnie" class="winnie-character char-winnie" title="Winnie the Health Insurance CEO">ğŸ•</div>
        <div id="daisy" class="winnie-character char-daisy hidden" title="Daisy the Mischievous Kitten">ğŸˆâ€â¬›</div>
        <div id="moppet" class="winnie-character char-moppet hidden" title="Moppet the Sophisticated Cat">ğŸˆ</div>
      </div>

      <!-- The Giant Hot Cheeto -->
      <!-- Added explicit onclick handler to wrapper to help debug, but main logic is in JS -->
      <div id="cheeto-container">
        <img src="https://www.pngall.com/wp-content/uploads/15/Cheeto-PNG-Photos.png" id="cheeto"
          class="giant-cheeto-img" alt="Giant Cheeto" draggable="false">
      </div>

      <!-- Floating Text Container -->
      <div id="floating-text-container"></div>

      <!-- Meltdown / Audit Overlay -->
      <div id="event-overlay" class="hidden">
        <h1 id="event-title">EVENT!</h1>
        <p id="event-desc">Something is happening...</p>
      </div>
    </main>

    <!-- Right Panel: Upgrades & Store -->
    <aside id="right-panel" class="panel glass-panel">

      <!-- Upgrades Section -->
      <div id="upgrades-section">
        <h3>Upgrades</h3>
        <div id="upgrades-list" class="horizontal-scroll">
          <!-- Upgrades injected here -->
        </div>
      </div>

      <!-- Store Section -->
      <div id="store-section">
        <h3>Health Insurance Tiers</h3>
        <div id="store-list" class="vertical-scroll">
          <!-- Store items injected here -->
        </div>
      </div>

      <!-- Mini-games Tab -->
      <div id="minigame-section"
        style="margin-top: 15px; border-top: 1px solid var(--glass-border); padding-top: 10px;">
        <h3>Executive Suite</h3>
        <div class="minigame-buttons" style="display: flex; gap: 5px; flex-wrap: wrap;">
          <button id="btn-stock-market" onclick="window.toggleMinigame('stock')" class="minigame-tab-btn">ğŸ“ˆ Bone
            Market</button>
          <button id="btn-grimoire" onclick="window.toggleMinigame('grimoire')" class="minigame-tab-btn">ğŸ“– Trick
            Book</button>
          <button id="btn-garden" onclick="window.toggleMinigame('garden')" class="minigame-tab-btn">ğŸŒ± Toy
            Garden</button>
          <button id="btn-pantheon" onclick="window.toggleMinigame('pantheon')" class="minigame-tab-btn">ğŸ›ï¸ Pet
            Pantheon</button>
        </div>
      </div>
    </aside>
  </div>

  <!-- Mini-game Overlays -->
  <div id="minigame-overlay" class="hidden">
    <div class="minigame-window glass-panel">
      <div class="minigame-header">
        <h2 id="minigame-title">Empire Suite</h2>
        <button onclick="window.toggleMinigame(null)" class="close-btn">&times;</button>
      </div>
      <div id="minigame-content">
        <!-- Stock Market or Grimoire content injected here -->
      </div>
    </div>
  </div>

  <!-- Disclaimer -->
  <footer id="disclaimer">
    This is satire. Winnie is innocent. Please do not commit crimes.
    <button onclick="resetGame()"
      style="background:transparent; border:1px solid #444; color:#666; cursor:pointer; font-size:0.7em; margin-left:10px; padding:2px 5px;">Reset
      Save</button>
  </footer>

  <script type="module" src="main.js?v=2"></script>
</body>

</html>